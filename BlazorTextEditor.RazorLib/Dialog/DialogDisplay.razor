@using BlazorTextEditor.RazorLib.Resize

@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<div class="bte_dialog-display @GlobalThemeCssClassString"
     style="@StyleCssString">

    @if (DialogRecord.IsResizable)
    {
        <ResizableDisplay @ref="_resizableDisplay"
                          ElementDimensions="DialogRecord.ElementDimensions"
                          ReRenderFuncAsync="ReRenderAsync"/>
    }

    <div class="bte_dialog-display-toolbar"
         @onmousedown="SubscribeMoveHandle">
        <div class="bte_dialog-display-title">
            @DialogRecord.Title
        </div>

        @* TODO: Use the <ButtonDisplay>...</ButtonDisplay> instead of class="bte_dialog-display-button-entry"*@
        <div class="bte_dialog-display-buttons"
             @onmousedown:stopPropagation="true">
            <button class="bte_dialog-display-button-entry"
                 @onclick="DispatchDisposeDialogRecordAction">
                <IconClose/>
            </button>
        </div>
    </div>

    <div class="bte_dialog-display-body">
        <CascadingValue Value="DialogRecord">
            <DynamicComponent @key="DialogRecord.DialogKey"
                              Type="DialogRecord.RendererType"
                              Parameters="DialogRecord.Parameters"/>
        </CascadingValue>
    </div>
</div>